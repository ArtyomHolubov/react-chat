(this["webpackJsonpreact-firebase-chat"]=this["webpackJsonpreact-firebase-chat"]||[]).push([[0],{80:function(e,t,n){},94:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t),n.d(t,"Context",(function(){return z}));var c=n(1),a=n.n(c),r=n(15),i=n.n(r),o=(n(80),n(21)),s=n(40),j=n(127),d=n(130),u=n(131),l=n(137),h=n(136),b="/login",x="/chat",O=n(30),p=n(7),f=function(){var e=Object(c.useContext)(z).auth,t=Object(O.a)(e),n=Object(o.a)(t,1)[0];return console.log("user",n),Object(p.jsx)(j.a,{position:"static",children:Object(p.jsxs)(d.a,{variant:"dense",children:[!!n&&Object(p.jsxs)(u.a,{container:!0,children:[Object(p.jsx)(l.a,{src:n.photoURL}),Object(p.jsx)("div",{children:n.displayName})]}),Object(p.jsx)(u.a,{container:!0,justify:"flex-end",children:n?Object(p.jsx)(h.a,{onClick:function(){return e.signOut()},variant:"outlined",children:"\u0412\u044b\u0439\u0442\u0438"}):Object(p.jsx)(s.b,{to:b,children:Object(p.jsx)(h.a,{variant:"outlined",children:"\u041b\u043e\u0433\u0438\u043d"})})})]})})},g=n(17),m=n(49),v=n(39),y=n.n(v),w=n(132),C=n(135),I=n(50),k=function(){var e=Object(c.useContext)(z).auth,t=function(){var t=Object(m.a)(y.a.mark((function t(){var n,c,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new I.a.auth.GoogleAuthProvider,t.next=3,e.signInWithPopup(n);case 3:c=t.sent,a=c.user,console.log(a);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(p.jsx)(w.a,{children:Object(p.jsx)(u.a,{container:!0,style:{height:window.innerHeight-50},alignItems:"center",justify:"center",children:Object(p.jsx)(u.a,{style:{width:400,background:"lightgray"},container:!0,alignItems:"center",direction:"column",children:Object(p.jsx)(C.a,{p:5,children:Object(p.jsx)(h.a,{onClick:t,variant:"outlined",children:"\u0412\u043e\u0439\u0442\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Google"})})})})})},L=n(133),B=n(66),F=function(){return Object(p.jsx)(w.a,{children:Object(p.jsx)(u.a,{container:!0,style:{height:window.innerHeight-50},alignItems:"center",justify:"center",children:Object(p.jsx)(u.a,{container:!0,alignItems:"center",direction:"column",children:"Loading..."})})})},A=function(){var e=Object(c.useContext)(z),t=e.auth,n=e.firestore,a=Object(O.a)(t),r=Object(o.a)(a,1)[0],i=Object(c.useState)(""),s=Object(o.a)(i,2),j=s[0],d=s[1],b=Object(B.a)(n.collection("messages").orderBy("createdAt")),x=Object(o.a)(b,2),f=x[0],g=x[1],v=function(){var e=Object(m.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.collection("messages").add({uid:r.uid,displayName:r.displayName,photoURL:r.photoURL,text:j,createdAt:I.a.firestore.FieldValue.serverTimestamp()}),d("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g?Object(p.jsx)(F,{}):Object(p.jsx)(w.a,{children:Object(p.jsxs)(u.a,{container:!0,justify:"center",style:{height:window.innerHeight-50,marginTop:20},children:[Object(p.jsx)("div",{style:{width:"80%",height:"60vh",border:"1px solid gray",overflowY:"auto"},children:f.map((function(e){return Object(p.jsxs)("div",{style:{margin:10,border:r.uid===e.uid?"2px solid green":"2px dashed red",marginLeft:r.uid===e.uid?"auto":"10px",width:"fit-content",padding:5},children:[Object(p.jsxs)(u.a,{container:!0,children:[Object(p.jsx)(l.a,{src:e.photoURL}),Object(p.jsx)("div",{children:e.displayName})]}),Object(p.jsx)("div",{children:e.text})]})}))}),Object(p.jsxs)(u.a,{container:!0,direction:"column",alignItems:"flex-end",style:{width:"80%"},children:[Object(p.jsx)(L.a,{fullWidth:!0,rowsMax:2,variant:"outlined",value:j,onChange:function(e){return d(e.target.value)}}),Object(p.jsx)(h.a,{onClick:v,variant:"outlined",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})})},P=[{path:b,Component:k}],R=[{path:x,Component:A}],S=function(){var e=Object(c.useContext)(z).auth,t=Object(O.a)(e);return Object(o.a)(t,1)[0]?Object(p.jsxs)(g.d,{children:[R.map((function(e){var t=e.path,n=e.Component;return Object(p.jsx)(g.b,{path:t,component:n,exact:!0},t)})),Object(p.jsx)(g.a,{to:x})]}):Object(p.jsxs)(g.d,{children:[P.map((function(e){var t=e.path,n=e.Component;return Object(p.jsx)(g.b,{path:t,component:n,exact:!0},t)})),Object(p.jsx)(g.a,{to:b})]})},G=(n(94),function(){var e=Object(c.useContext)(z).auth,t=Object(O.a)(e),n=Object(o.a)(t,3),a=(n[0],n[1]);n[2];return a?Object(p.jsx)(F,{}):Object(p.jsxs)(s.a,{children:[Object(p.jsx)(f,{}),Object(p.jsx)(S,{})]})}),H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,140)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},N=n(43);n(95),n(96);N.a.initializeApp({apiKey:"AIzaSyB7Wz5lOVLcqmfQxBFtqf_uwyElH3GoItk",authDomain:"chat-react-dcdce.firebaseapp.com",projectId:"chat-react-dcdce",storageBucket:"chat-react-dcdce.appspot.com",messagingSenderId:"817208636060",appId:"1:817208636060:web:c7033867a12972b6567359",measurementId:"G-XYV8M2ELR5"});var T=N.a.auth(),U=N.a.firestore(),z=Object(c.createContext)(null);i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(z.Provider,{value:{firebase:N.a,auth:T,firestore:U},children:Object(p.jsx)(G,{})})}),document.getElementById("root")),H()}},[[97,1,2]]]);
//# sourceMappingURL=main.31dc6a92.chunk.js.map